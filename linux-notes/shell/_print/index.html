<!doctype html>
<html lang="zh-cn" class="no-js">
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="generator" content="Hugo 0.101.0" />
<link rel="canonical" type="text/html" href="https://blog.huweihuang.com/linux-notes/shell/">
<link rel="alternate" type="application/rss&#43;xml" href="https://blog.huweihuang.com/linux-notes/shell/index.xml">
<meta name="robots" content="noindex, nofollow">


<link rel="shortcut icon" href="/favicons/favicon.ico" >
<link rel="apple-touch-icon" href="/favicons/apple-touch-icon-180x180.png" sizes="180x180">
<link rel="icon" type="image/png" href="/favicons/favicon-16x16.png" sizes="16x16">
<link rel="icon" type="image/png" href="/favicons/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/favicons/android-36x36.png" sizes="36x36">
<link rel="icon" type="image/png" href="/favicons/android-48x48.png" sizes="48x48">
<link rel="icon" type="image/png" href="/favicons/android-72x72.png" sizes="72x72">
<link rel="icon" type="image/png" href="/favicons/android-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicons/android-144x144.png" sizes="144x144">
<link rel="icon" type="image/png" href="/favicons/android-192x192.png" sizes="192x192">

<title>Shell脚本 | 胡伟煌</title>
<meta name="description" content="">
<meta property="og:title" content="Shell脚本" />
<meta property="og:description" content="Kubernetes学习笔记" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://blog.huweihuang.com/linux-notes/shell/" /><meta property="og:site_name" content="胡伟煌" />

<meta itemprop="name" content="Shell脚本">
<meta itemprop="description" content="Kubernetes学习笔记"><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Shell脚本"/>
<meta name="twitter:description" content="Kubernetes学习笔记"/>




<link rel="preload" href="/scss/main.min.79e3930541ca05b5395c14b2a313b798fad1dc69f9a14aefa57b62eaa9f65f14.css" as="style">
<link href="/scss/main.min.79e3930541ca05b5395c14b2a313b798fad1dc69f9a14aefa57b62eaa9f65f14.css" rel="stylesheet" integrity="">

<script
  src="https://code.jquery.com/jquery-3.6.0.min.js"
  integrity="sha384-vtXRMe3mGCbOeY7l30aIg8H9p3GdeSe4IFlP6G8JMa7o7lXvnz3GFKzPxzJdPfGK"
  crossorigin="anonymous"></script>
<script
  src="https://unpkg.com/lunr@2.3.9/lunr.min.js"
  integrity="sha384-203J0SNzyqHby3iU6hzvzltrWi/M41wOP5Gu+BiJMz5nwKykbkUx8Kp7iti0Lpli"
  crossorigin="anonymous"></script>
<link rel="stylesheet" href="/css/prism.css"/>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-114718458-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  </head>
  <body class="td-section">
    <header>
      
<nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar">
        <a class="navbar-brand" href="/">
		<span class="navbar-logo"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" width="64" height="64"><path d="M15.9.476a2.14 2.14.0 00-.823.218L3.932 6.01c-.582.277-1.005.804-1.15 1.432L.054 19.373c-.13.56-.025 1.147.3 1.627q.057.087.12.168l7.7 9.574c.407.5 1.018.787 1.662.784h12.35c.646.001 1.258-.3 1.664-.793l7.696-9.576c.404-.5.555-1.16.4-1.786L29.2 7.43c-.145-.628-.57-1.155-1.15-1.432L16.923.695A2.14 2.14.0 0015.89.476z" fill="#326ce5"/><path d="M16.002 4.542c-.384.027-.675.356-.655.74v.188c.018.213.05.424.092.633a6.22 6.22.0 01.066 1.21c-.038.133-.114.253-.218.345l-.015.282c-.405.034-.807.096-1.203.186-1.666.376-3.183 1.24-4.354 2.485l-.24-.17c-.132.04-.274.025-.395-.04a6.22 6.22.0 01-.897-.81 5.55 5.55.0 00-.437-.465l-.148-.118c-.132-.106-.294-.167-.463-.175a.64.64.0 00-.531.236c-.226.317-.152.756.164.983l.138.11a5.55 5.55.0 00.552.323c.354.197.688.428.998.7a.74.74.0 01.133.384l.218.2c-1.177 1.766-1.66 3.905-1.358 6.006l-.28.08c-.073.116-.17.215-.286.288a6.22 6.22.0 01-1.194.197 5.57 5.57.0 00-.64.05l-.177.04h-.02a.67.67.0 00-.387 1.132.67.67.0 00.684.165h.013l.18-.02c.203-.06.403-.134.598-.218.375-.15.764-.265 1.162-.34.138.008.27.055.382.135l.3-.05c.65 2.017 2.016 3.726 3.84 4.803l-.122.255c.056.117.077.247.06.376-.165.382-.367.748-.603 1.092a5.58 5.58.0 00-.358.533l-.085.18a.67.67.0 00.65 1.001.67.67.0 00.553-.432l.083-.17c.076-.2.14-.404.192-.61.177-.437.273-.906.515-1.196a.54.54.0 01.286-.14l.15-.273a8.62 8.62.0 006.146.015l.133.255c.136.02.258.095.34.205.188.358.34.733.456 1.12a5.57 5.57.0 00.194.611l.083.17a.67.67.0 001.187.131.67.67.0 00.016-.701l-.087-.18a5.55 5.55.0 00-.358-.531c-.23-.332-.428-.686-.6-1.057a.52.52.0 01.068-.4 2.29 2.29.0 01-.111-.269c1.82-1.085 3.18-2.8 3.823-4.82l.284.05c.102-.093.236-.142.373-.138.397.076.786.2 1.162.34.195.09.395.166.598.23.048.013.118.024.172.037h.013a.67.67.0 00.841-.851.67.67.0 00-.544-.446l-.194-.046a5.57 5.57.0 00-.64-.05c-.404-.026-.804-.092-1.194-.197-.12-.067-.22-.167-.288-.288l-.27-.08a8.65 8.65.0 00-1.386-5.993l.236-.218c-.01-.137.035-.273.124-.378.307-.264.64-.497.99-.696a5.57 5.57.0 00.552-.323l.146-.118a.67.67.0 00-.133-1.202.67.67.0 00-.696.161l-.148.118a5.57 5.57.0 00-.437.465c-.264.302-.556.577-.873.823a.74.74.0 01-.404.044l-.253.18c-1.46-1.53-3.427-2.48-5.535-2.67.0-.1-.013-.25-.015-.297-.113-.078-.192-.197-.218-.332a6.23 6.23.0 01.076-1.207c.043-.21.073-.42.092-.633v-.2c.02-.384-.27-.713-.655-.74zm-.834 5.166-.2 3.493h-.015c-.01.216-.137.4-.332.504s-.426.073-.6-.054l-2.865-2.03a6.86 6.86.0 013.303-1.799c.234-.05.47-.088.707-.114zm1.668.0c1.505.187 2.906.863 3.99 1.924l-2.838 2.017c-.175.14-.415.168-.618.072s-.333-.3-.336-.524zm-6.72 3.227 2.62 2.338v.015c.163.142.234.363.186.574s-.21.378-.417.435v.01l-3.362.967a6.86 6.86.0 01.974-4.34zm11.753.0c.796 1.295 1.148 2.814 1.002 4.327l-3.367-.97v-.013c-.21-.057-.37-.224-.417-.435s.023-.43.186-.574l2.6-2.327zm-6.404 2.52h1.072l.655.832-.238 1.04-.963.463-.965-.463-.227-1.04zm3.434 2.838c.045-.005.1-.005.135.0l3.467.585c-.5 1.44-1.487 2.67-2.775 3.493l-1.34-3.244a.59.59.0 01.509-.819zm-5.823.015c.196.003.377.104.484.268s.124.37.047.55v.013l-1.332 3.218C11 21.54 10.032 20.325 9.517 18.9l3.437-.583c.038-.004.077-.004.116.0zm2.904 1.4a.59.59.0 01.537.308h.013l1.694 3.057-.677.2c-1.246.285-2.547.218-3.758-.194l1.7-3.057c.103-.18.293-.29.5-.295z" fill="#fff" stroke="#fff" stroke-width=".055"/></svg></span><span class="font-weight-bold">胡伟煌</span>
	</a>
	<div class="td-navbar-nav-scroll ml-md-auto" id="main_navbar">
		<ul class="navbar-nav mt-2 mt-lg-0">
			
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/kubernetes-notes/" ><span>Kubernetes学习笔记</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/k8s-source-code-analysis/" ><span>Kubernetes源码分析</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/golang-notes/" ><span>Golang学习笔记</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link active" href="/linux-notes/" ><span class="active">Linux学习笔记</span></a>
			</li>
			
			<li class="nav-item mr-4 mb-2 mb-lg-0">
				
				
				
				
				
				
				
				
				<a class="nav-link" href="/about/" ><span>About</span></a>
			</li>
			
			
			
		</ul>
	</div>
	<div class="navbar-nav d-none d-lg-block"><input
  type="search"
  class="form-control td-search-input"
  placeholder="&#xf002; 站内搜索…"
  aria-label="站内搜索…"
  autocomplete="off"
  
  data-offline-search-index-json-src="/offline-search-index.9565491211338d2ae17150e22b5747a0.json"
  data-offline-search-base-href="/"
  data-offline-search-max-results="10"
>
</div>
</nav>

    </header>
    <div class="container-fluid td-outer">
      <div class="td-main">
        <div class="row flex-xl-nowrap">
          <main class="col-12 col-md-9 col-xl-8 pl-md-5" role="main">
            




<div class="td-content">
<div class="pageinfo pageinfo-primary d-print-none">
<p>
这是本节的多页打印视图。
<a href="#" onclick="print();return false;">点击此处打印</a>.
</p><p>
<a href="/linux-notes/shell/">返回本页常规视图</a>.
</p>
</div>



<h1 class="title">Shell脚本</h1>





    <ul>
    
  
  
  
  

  
    
    
	
<li>1: <a href="#pg-1c9274495cca8d3f7a2a4cdfef52cf76">Shell简介</a></li>


    
  
    
    
	
<li>2: <a href="#pg-13fe6aa636c36aafc0610e9e5bafe6dd">Shell变量</a></li>


    
  
    
    
	
<li>3: <a href="#pg-c62e5c02b9a01be54ad23d975c082291">Shell运算符</a></li>


    
  
    
    
	
<li>4: <a href="#pg-c4413e1441110142d959e29a1be59096">Shell数组</a></li>


    
  
    
    
	
<li>5: <a href="#pg-1c4908b9298c264248fc1c192a1aa162">Shell echo命令</a></li>


    
  
    
    
	
<li>6: <a href="#pg-3e7580ccae2cfd4463708b26683b2832">Shell 判断语句</a></li>


    
  
    
    
	
<li>7: <a href="#pg-520bfcc1b1f2e050d803497bcd9f2646">Shell 循环语句</a></li>


    
  
    
    
	
<li>8: <a href="#pg-427cb5778e5423db520256d99897d9a6">Shell 函数</a></li>


    
  
    
    
	
<li>9: <a href="#pg-e6194060e55926f98d5865870e2d2baa">Shell 重定向</a></li>


    
  

    </ul>


<div class="content">
      
</div>
</div>


  
  
  
  

  
  

  
    
    
	
    

<div class="td-content" style="">
    
	<h1 id="pg-1c9274495cca8d3f7a2a4cdfef52cf76">1 - Shell简介</h1>
    
	<h1 id="1-shell简介">1. shell简介</h1>
<p><code>shell</code>是用户和Linux内核之间的一层代理，解释用户输入的命令，传递给内核。</p>
<p>shell是一种脚本语言（解释性语言）。</p>
<p>Shell既是一种命令语言，又是一种程序设计语言。作为命令语言，它交互式地解释和执行用户输入的命令；作为程序设计语言，它定义了各种变量和参数，并提供了许多在高级语言中才具有的控制结构，包括循环和分支。</p>
<p><strong>Shell有两种执行命令的方式：</strong></p>
<ul>
<li>交互式（Interactive）：解释执行用户的命令，用户输入一条命令，Shell就解释执行一条。</li>
<li>批处理（Batch）：用户事先写一个Shell脚本(Script)，其中有很多条命令，让Shell一次把这些命令执行完，而不必一条一条地敲命令。</li>
</ul>
<p>Shell脚本和编程语言很相似，也有变量和流程控制语句，但Shell脚本是解释执行的，不需要编译，Shell程序从脚本中一行一行读取并执行这些命令，相当于一个用户把脚本中的命令一行一行敲到Shell提示符下执行。</p>
<p>Unix/Linux上常见的Shell脚本解释器有bash、sh、csh、ksh等，习惯上把它们称作一种Shell。</p>
<p>程序设计语言可以分为两类：编译型语言和解释型语言。</p>
<h2 id="1-1-编译型语言">1.1. 编译型语言</h2>
<p>很多传统的程序设计语言，例如Fortran、Ada、Pascal、C、C++和Java，都是编译型语言。这类语言需要预先将我们写好的源代码(source code)转换成目标代码(object code)，这个过程被称作“编译”。运行程序时，直接读取目标代码(object code)。由于编译后的目标代码(object code)非常接近计算机底层，因此执行效率很高，这是编译型语言的优点。</p>
<p>编译型语言多半运作于底层，所处理的是字节、整数、浮点数或是其他机器层级的对象，往往实现一个简单的功能需要大量复杂的代码。</p>
<h2 id="1-2-解释型语言">1.2. 解释型语言</h2>
<p>有的语言（例如： Shell、JavaScript、Python、PHP等）需要一边执行一边翻译，不会产生任何可执行文件，用户需要拿到源码才能运行程序。程序运行后会即时翻译，翻译一部分执行一部分，并不用等所有代码翻译完。</p>
<p>这个过程叫<code>解释</code>，这类语言叫<code>解释型语言</code>或<code>脚本语言</code>，完成解释过程的软件叫<code>解释器</code>。</p>
<p>解释型语言也被称作“脚本语言”。因为每次执行程序都多了编译的过程，因此效率有所下降。</p>
<p>使用脚本编程语言的好处是，它们多半运行在比编译型语言还高的层级，能够轻易处理文件与目录之类的对象；缺点是它们的效率通常不如编译型语言。</p>
<p>脚本编程语言的例子有awk、Perl、Python、Ruby与Shell。</p>
<h1 id="2-常见的shell类型">2. 常见的Shell类型</h1>
<table>
<thead>
<tr>
<th>shell类型</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>sh</td>
<td>sh 是 UNIX 上的标准 shell，很多 UNIX 版本都配有 sh。</td>
</tr>
<tr>
<td>bash</td>
<td>bash shell 是 Linux 的默认 shell，bash 兼容 sh，但并不完全一致。</td>
</tr>
<tr>
<td>csh</td>
<td>语法有点类似C语言。</td>
</tr>
<tr>
<td>...</td>
<td></td>
</tr>
</tbody>
</table>
<h2 id="2-1-查看shell">2.1. 查看shell</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ cat /etc/shells
</span></span><span style="display:flex;"><span>/bin/sh
</span></span><span style="display:flex;"><span>/bin/bash
</span></span><span style="display:flex;"><span>/sbin/nologin
</span></span><span style="display:flex;"><span>/usr/bin/sh
</span></span><span style="display:flex;"><span>/usr/bin/bash
</span></span><span style="display:flex;"><span>/usr/sbin/nologin
</span></span><span style="display:flex;"><span>/bin/tcsh
</span></span><span style="display:flex;"><span>/bin/csh
</span></span></code></pre></div><p>查看默认shell</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ <span style="color:#204a87">echo</span> <span style="color:#000">$SHELL</span>
</span></span><span style="display:flex;"><span>/bin/bash
</span></span></code></pre></div><p>sh 一般被 bash 代替，<code>/bin/sh</code>往往是指向<code>/bin/bash</code>的符号链接。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ ls -l /bin/sh
</span></span><span style="display:flex;"><span>lrwxrwxrwx. <span style="color:#0000cf;font-weight:bold">1</span> root root <span style="color:#0000cf;font-weight:bold">4</span> Mar  <span style="color:#0000cf;font-weight:bold">8</span>  <span style="color:#0000cf;font-weight:bold">2018</span> /bin/sh -&gt; bash
</span></span></code></pre></div><h1 id="3-使用shell场景">3. 使用shell场景</h1>
<p>之所以要使用Shell脚本是基于：</p>
<ul>
<li>简单性：Shell是一个高级语言；通过它，你可以简洁地表达复杂的操作。</li>
<li>可移植性：使用POSIX所定义的功能，可以做到脚本无须修改就可在不同的系统上执行。</li>
<li>开发容易：可以在短时间内完成一个功能强大又妤用的脚本。</li>
</ul>
<p>但是，考虑到Shell脚本的命令限制和效率问题，下列情况一般不使用Shell：</p>
<ol>
<li>资源密集型的任务，尤其在需要考虑效率时（比如，排序，hash等等）。</li>
<li>需要处理大任务的数学操作，尤其是浮点运算，精确运算，或者复杂的算术运算（这种情况一般使用C++或FORTRAN 来处理）。</li>
<li>有跨平台（操作系统）移植需求（一般使用C 或Java）。</li>
<li>复杂的应用，在必须使用结构化编程的时候（需要变量的类型检查，函数原型，等等）。</li>
<li>对于影响系统全局性的关键任务应用。</li>
<li>对于安全有很高要求的任务，比如你需要一个健壮的系统来防止入侵、破解、恶意破坏等等。</li>
<li>项目由连串的依赖的各个部分组成。</li>
<li>需要大规模的文件操作。</li>
<li>需要多维数组的支持。</li>
<li>需要数据结构的支持，比如链表或数等数据结构。</li>
<li>需要产生或操作图形化界面 GUI。</li>
<li>需要直接操作系统硬件。</li>
<li>需要 I/O 或socket 接口。</li>
<li>需要使用库或者遗留下来的老代码的接口。</li>
<li>私人的、闭源的应用（shell 脚本把代码就放在文本文件中，全世界都能看到）。</li>
</ol>
<h1 id="4-shell脚本">4. shell脚本</h1>
<p>打开文本编辑器，新建一个文件，扩展名为sh（sh代表shell），扩展名并不影响脚本执行，见名知意就好，如果你用php写shell 脚本，扩展名就用php好了。</p>
<p>输入一些代码：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#34;Hello World !&#34;</span>
</span></span></code></pre></div><p><strong>“#!” 是一个约定的标记，它告诉系统这个脚本需要什么解释器来执行，即使用哪一种Shell</strong>。echo命令用于向窗口输出文本。</p>
<h1 id="5-运行shell">5. 运行shell</h1>
<p>运行Shell脚本有两种方法。</p>
<h2 id="5-1-作为可执行程序">5.1. 作为可执行程序</h2>
<p>将上面的代码保存为test.sh，并 cd 到相应目录：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>chmod +x ./test.sh  <span style="color:#8f5902;font-style:italic">#使脚本具有执行权限</span>
</span></span><span style="display:flex;"><span>./test.sh  <span style="color:#8f5902;font-style:italic">#执行脚本</span>
</span></span></code></pre></div><p>注意，一定要写成./test.sh，而不是test.sh。运行其它二进制的程序也一样，直接写test.sh，linux系统会去PATH里寻找有没有叫test.sh的，而只有/bin, /sbin, /usr/bin，/usr/sbin等在PATH里，你的当前目录通常不在PATH里，所以写成test.sh是会找不到命令的，要用./test.sh告诉系统说，就在当前目录找。</p>
<h2 id="5-2-作为解释器参数">5.2. 作为解释器参数</h2>
<p>这种运行方式是，直接运行解释器</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># 使用 sh 解释器</span>
</span></span><span style="display:flex;"><span>sh test.sh
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># 使用 bash 解释器</span>
</span></span><span style="display:flex;"><span>bash test.sh
</span></span></code></pre></div><p>这种方式运行的脚本，不需要在第一行指定解释器信息，写了也没用。</p>
<p>参考：</p>
<ul>
<li><a href="http://c.biancheng.net/cpp/shell/">http://c.biancheng.net/cpp/shell/</a></li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-13fe6aa636c36aafc0610e9e5bafe6dd">2 - Shell变量</h1>
    
	<h1 id="1-shell变量">1. shell变量</h1>
<p>Shell支持自定义变量。</p>
<h2 id="1-1-定义变量">1.1. 定义变量</h2>
<p>定义变量时，变量名不加美元符号<code>（$）</code>，如：</p>
<pre tabindex="0"><code>variableName=&#34;value&#34;
</code></pre><p>注意，<strong>变量名和等号之间不能有空格</strong>，这可能和你熟悉的所有编程语言都不一样。同时，变量名的命名须遵循如下规则：</p>
<ul>
<li>首个字符必须为字母（a-z，A-Z）。</li>
<li>中间不能有空格，可以使用下划线（_）。</li>
<li>不能使用标点符号。</li>
<li>不能使用bash里的关键字（可用help命令查看保留关键字）。</li>
</ul>
<h2 id="1-2-使用变量">1.2. 使用变量</h2>
<p>使用一个定义过的变量，只要在变量名前面加美元符号（$）即可，如：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#000">your_name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;mozhiyan&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">echo</span> <span style="color:#000">$your_name</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">echo</span> <span style="color:#4e9a06">${</span><span style="color:#000">your_name</span><span style="color:#4e9a06">}</span>
</span></span></code></pre></div><p>变量名外面的花括号是可选的，加不加都行，，比如下面这种情况：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">for</span> skill in Ada Coffe Action Java 
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#34;I am good at </span><span style="color:#4e9a06">${</span><span style="color:#000">skill</span><span style="color:#4e9a06">}</span><span style="color:#4e9a06">Script&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">done</span>
</span></span></code></pre></div><p>如果不给skill变量加花括号，写成echo &quot;I am good at $skillScript&quot;，解释器就会把$skillScript当成一个变量（其值为空），代码执行结果就不是我们期望的样子了。推荐给所有变量加上花括号，这是个好的编程习惯。</p>
<h2 id="1-3-重新定义变量">1.3. 重新定义变量</h2>
<p>已定义的变量，可以被重新定义，如：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#000">myUrl</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;http://see.xidian.edu.cn/cpp/linux/&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">echo</span> <span style="color:#4e9a06">${</span><span style="color:#000">myUrl</span><span style="color:#4e9a06">}</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#000">myUrl</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;http://see.xidian.edu.cn/cpp/shell/&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">echo</span> <span style="color:#4e9a06">${</span><span style="color:#000">myUrl</span><span style="color:#4e9a06">}</span>
</span></span></code></pre></div><p>这样写是合法的，但注意，第二次赋值的时候不能写 $myUrl=&quot;http://see.xidian.edu.cn/cpp/shell/&quot;， 使用变量的时候才加美元符（$）。</p>
<h2 id="1-4-只读变量">1.4. 只读变量</h2>
<p>使用 <strong>readonly</strong> 命令可以将变量定义为只读变量，只读变量的值不能被改变。</p>
<p>下面的例子尝试更改只读变量，结果报错：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">myUrl</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;http://see.xidian.edu.cn/cpp/shell/&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">readonly</span> myUrl
</span></span><span style="display:flex;"><span><span style="color:#000">myUrl</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;http://see.xidian.edu.cn/cpp/danpianji/&#34;</span>
</span></span></code></pre></div><p>运行脚本，结果如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>/bin/sh: NAME: This variable is <span style="color:#204a87">read</span> only.
</span></span></code></pre></div><h2 id="1-5-删除变量">1.5. 删除变量</h2>
<p>使用 <strong>unset</strong> 命令可以删除变量。语法：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#204a87">unset</span> variable_name
</span></span></code></pre></div><p>变量被删除后不能再次使用；unset 命令不能删除只读变量。</p>
<p>举个例子：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#!/bin/sh
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#000">myUrl</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;http://see.xidian.edu.cn/cpp/u/xitong/&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">unset</span> myUrl
</span></span><span style="display:flex;"><span><span style="color:#204a87">echo</span> <span style="color:#000">$myUrl</span>
</span></span></code></pre></div><p>上面的脚本没有任何输出。</p>
<h2 id="1-6-变量类型">1.6. 变量类型</h2>
<p>运行shell时，会同时存在三种变量：</p>
<h3 id="1-局部变量">1) 局部变量</h3>
<p>局部变量在脚本或命令中定义，仅在当前shell实例中有效，其他shell启动的程序不能访问局部变量。</p>
<h3 id="2-环境变量">2) 环境变量</h3>
<p>所有的程序，包括shell启动的程序，都能访问环境变量，有些程序需要环境变量来保证其正常运行。必要的时候shell脚本也可以定义环境变量。</p>
<h3 id="3-shell变量">3) shell变量</h3>
<p>shell变量是由shell程序设置的特殊变量。shell变量中有一部分是环境变量，有一部分是局部变量，这些变量保证了shell的正常运行。</p>
<hr>
<h1 id="2-shell的特殊变量">2. shell的特殊变量</h1>
<p>特殊变量列表</p>
<table>
<thead>
<tr>
<th>变量</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>$0</td>
<td>当前脚本的文件名</td>
</tr>
<tr>
<td>$n</td>
<td>传递给脚本或函数的参数。n 是一个数字，表示第几个参数。例如，第一个参数是$1，第二个参数是$2。</td>
</tr>
<tr>
<td>$#</td>
<td>传递给脚本或函数的参数个数。</td>
</tr>
<tr>
<td>$*</td>
<td>传递给脚本或函数的所有参数。</td>
</tr>
<tr>
<td>$@</td>
<td>传递给脚本或函数的所有参数。被双引号(&quot; &quot;)包含时，与 $* 稍有不同，下面将会讲到。</td>
</tr>
<tr>
<td>$?</td>
<td>上个命令的退出状态，或函数的返回值。</td>
</tr>
<tr>
<td>$$</td>
<td>当前Shell进程ID。对于 Shell 脚本，就是这些脚本所在的进程ID。</td>
</tr>
</tbody>
</table>
<h2 id="2-1-命令行参数">2.1. 命令行参数</h2>
<p>运行脚本时传递给脚本的参数称为命令行参数。命令行参数用\ $n 表示，例如，$1 表示第一个参数，$2 表示第二个参数，依次类推。</p>
<h2 id="2-2-和-的区别">2.2. $* 和$@ 的区别</h2>
<p>$* 和 $@ 都表示传递给函数或脚本的所有参数，不被双引号(&quot; &quot;)包含时，都以&quot;$1&quot; &quot;$2&quot; … &quot;$n&quot; 的形式输出所有参数。
但是当它们被双引号(&quot; &quot;)包含时，</p>
<ul>
<li>
<p>&quot;$*&quot; 会将所有的参数作为一个整体，以&quot;$1 $2 … $n&quot;的形式输出所有参数；</p>
</li>
<li>
<p>&quot;$@&quot; 会将各个参数分开，以&quot;$1&quot; &quot;$2&quot; … &quot;$n&quot; 的形式输出所有参数。</p>
</li>
</ul>
<h2 id="2-3-退出状态">2.3. 退出状态</h2>
<p>$? 可以获取上一个命令的退出状态。所谓退出状态，就是上一个命令执行后的返回结果。
退出状态是一个数字，一般情况下，大部分命令执行成功会返回 0，失败返回 1。
不过，也有一些命令返回其他值，表示不同类型的错误。$? 也可以表示函数的返回值。</p>
<hr>
<h1 id="3-转义字符">3. 转义字符</h1>
<p>如果表达式中包含特殊字符，Shell 将会进行替换。例如，在双引号中使用变量就是一种替换，转义字符也是一种替换。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#204a87">echo</span> -e <span style="color:#4e9a06">&#34;Value of a is </span><span style="color:#000">$a</span><span style="color:#4e9a06"> \n&#34;</span> 
</span></span></code></pre></div><p>-e 表示对转义字符进行替换</p>
<p>下面的转义字符都可以用在 echo 中：</p>
<table>
<thead>
<tr>
<th>转义字符</th>
<th>含义</th>
</tr>
</thead>
<tbody>
<tr>
<td>\</td>
<td>反斜杠</td>
</tr>
<tr>
<td>\a</td>
<td>警报，响铃</td>
</tr>
<tr>
<td>\b</td>
<td>退格（删除键）</td>
</tr>
<tr>
<td>\f</td>
<td>换页(FF)，将当前位置移到下页开头</td>
</tr>
<tr>
<td>\n</td>
<td>换行</td>
</tr>
<tr>
<td>\r</td>
<td>回车</td>
</tr>
<tr>
<td>\t</td>
<td>水平制表符（tab键）</td>
</tr>
<tr>
<td>\v</td>
<td>垂直制表符</td>
</tr>
</tbody>
</table>
<p>可以使用 echo 命令的 -E 选项禁止转义，默认也是不转义的；使用 -n 选项可以禁止插入换行符。</p>
<h1 id="4-变量替换">4. 变量替换</h1>
<h2 id="4-1-命令替换">4.1. 命令替换</h2>
<p>命令替换是指Shell可以先执行命令，将输出结果暂时保存，在适当的地方输出。
命令替换的语法：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#4e9a06">`</span><span style="color:#204a87">command</span><span style="color:#4e9a06">`</span>
</span></span></code></pre></div><p>注意是反引号，不是单引号，这个键位于 Esc 键下方。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#000">DATE</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">`</span>date<span style="color:#4e9a06">`</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#34;Date is </span><span style="color:#000">$DATE</span><span style="color:#4e9a06">&#34;</span>
</span></span></code></pre></div><h2 id="4-2-变量替换">4.2. 变量替换</h2>
<p>变量替换可以根据变量的状态（是否为空、是否定义等）来改变它的值
可以使用的变量替换形式：</p>
<table>
<thead>
<tr>
<th>形式</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>${var}</td>
<td>变量本来的值</td>
</tr>
<tr>
<td>${var:-word}</td>
<td>如果变量 var 为空或已被删除(unset)，那么返回 word，但不改变 var 的值。</td>
</tr>
<tr>
<td>${var:=word}</td>
<td>如果变量 var 为空或已被删除(unset)，那么返回 word，并将 var 的值设置为 word。</td>
</tr>
<tr>
<td>${var:?message}</td>
<td>如果变量 var 为空或已被删除(unset)，那么将消息 message 送到标准错误输出，可以用来检测变量 var 是否可以被正常赋值。 若此替换出现在Shell脚本中，那么脚本将停止运行。</td>
</tr>
<tr>
<td>${var:+word}</td>
<td>如果变量 var 被定义，那么返回 word，但不改变 var 的值。</td>
</tr>
</tbody>
</table>
<p>作用：用来检测变量是否为空，并提示相关信息。</p>
<p>参考：</p>
<ul>
<li><a href="http://c.biancheng.net/cpp/shell/">http://c.biancheng.net/cpp/shell/</a></li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-c62e5c02b9a01be54ad23d975c082291">3 - Shell运算符</h1>
    
	<h1 id="1-shell运算符">1. shell运算符</h1>
<p>Bash 支持很多运算符，包括算数运算符、关系运算符、布尔运算符、字符串运算符和文件测试运算符。
awk 和 expr，expr 最常用</p>
<p>例如，两个数相加：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>
</span></span><span style="display:flex;"><span><span style="color:#000">val</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">`</span>expr <span style="color:#0000cf;font-weight:bold">2</span> + 2<span style="color:#4e9a06">`</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#34;Total value : </span><span style="color:#000">$val</span><span style="color:#4e9a06">&#34;</span>
</span></span></code></pre></div><p>运行脚本输出：</p>
<pre tabindex="0"><code>Total value : 4
</code></pre><p>两点注意：</p>
<ul>
<li><strong>表达式和运算符之间要有空格</strong>，例如 2+2 是不对的，必须写成 2 + 2，这与我们熟悉的大多数编程语言不一样。</li>
<li>完整的表达式要被``包含，注意这个字符不是常用的单引号，在 Esc 键下边。</li>
</ul>
<h2 id="1-1-算术运算符">1.1. 算术运算符</h2>
<p>算术运算符列表</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td>+</td>
<td>加法</td>
<td>`expr $a + $b` 结果为 30。</td>
</tr>
<tr>
<td>-</td>
<td>减法</td>
<td>`expr $a - $b` 结果为 10。</td>
</tr>
<tr>
<td>*</td>
<td>乘法</td>
<td>`expr $a * $b` 结果为  200。</td>
</tr>
<tr>
<td>/</td>
<td>除法</td>
<td>`expr $b / $a` 结果为 2。</td>
</tr>
<tr>
<td>%</td>
<td>取余</td>
<td>`expr $b % $a` 结果为 0。</td>
</tr>
<tr>
<td>=</td>
<td>赋值</td>
<td>a=$b 将把变量 b 的值赋给 a。</td>
</tr>
<tr>
<td>==</td>
<td>相等。用于比较两个数字，相同则返回 true。</td>
<td>[ $a == $b ] 返回 false。</td>
</tr>
<tr>
<td>!=</td>
<td>不相等。用于比较两个数字，不相同则返回 true。</td>
<td>[ $a != $b ] 返回 true。</td>
</tr>
</tbody>
</table>
<p>注意：</p>
<ul>
<li>
<p>乘号(*)前边必须加反斜杠()才能实现乘法运算</p>
</li>
<li>
<p>条件表达式要放在方括号之间，并且要有空格，例如 [$a==$b] 是错误的，必须写成 [$a == $b ]。</p>
</li>
</ul>
<h2 id="1-2-关系运算符">1.2. 关系运算符</h2>
<p>关系运算符只支持数字，不支持字符串，除非字符串的值是数字。</p>
<p>关系运算符列表</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td>-eq</td>
<td>检测两个数是否相等，相等返回 true。</td>
<td>[ $a -eq $b ] 返回 true。</td>
</tr>
<tr>
<td>-ne</td>
<td>检测两个数是否相等，不相等返回 true。</td>
<td>[ $a -ne $b ] 返回 true。</td>
</tr>
<tr>
<td>-gt</td>
<td>检测左边的数是否大于右边的，如果是，则返回 true。</td>
<td>[ $a -gt $b ] 返回 false。</td>
</tr>
<tr>
<td>-lt</td>
<td>检测左边的数是否小于右边的，如果是，则返回 true。</td>
<td>[ $a -lt $b ] 返回 true。</td>
</tr>
<tr>
<td>-ge</td>
<td>检测左边的数是否大等于右边的，如果是，则返回 true。</td>
<td>[ $a -ge $b ] 返回 false。</td>
</tr>
<tr>
<td>-le</td>
<td>检测左边的数是否小于等于右边的，如果是，则返回 true。</td>
<td>[ $a -le $b ] 返回 true。</td>
</tr>
</tbody>
</table>
<ul>
<li>
<p>eq:equal</p>
</li>
<li>
<p>ne:not equal</p>
</li>
<li>
<p>gt:greater than</p>
</li>
<li>
<p>lt:less than</p>
</li>
<li>
<p>ge:greater or equal</p>
</li>
<li>
<p>le:less or equal</p>
</li>
</ul>
<h2 id="1-3-布尔运算符">1.3. 布尔运算符</h2>
<p>布尔运算符列表</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td>!</td>
<td>非运算，表达式为 true 则返回 false，否则返回 true。</td>
<td>[ ! false ] 返回 true。</td>
</tr>
<tr>
<td>-o</td>
<td>或运算，有一个表达式为 true 则返回 true。</td>
<td>[ $a -lt 20 -o $b -gt 100 ] 返回 true。</td>
</tr>
<tr>
<td>-a</td>
<td>与运算，两个表达式都为 true 才返回 true。</td>
<td>[ $a -lt 20 -a $b -gt 100 ] 返回 false。</td>
</tr>
</tbody>
</table>
<ul>
<li>-o:or  或</li>
<li>-a: and  与</li>
</ul>
<h2 id="1-4-字符串运算符">1.4. 字符串运算符</h2>
<p>字符串运算符列表</p>
<table>
<thead>
<tr>
<th>运算符</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td>=</td>
<td>检测两个字符串是否相等，相等返回 true。</td>
<td>[ $a = $b ] 返回 false。</td>
</tr>
<tr>
<td>!=</td>
<td>检测两个字符串是否相等，不相等返回 true。</td>
<td>[ $a != $b ] 返回 true。</td>
</tr>
<tr>
<td>-z</td>
<td>检测字符串长度是否为0，为0返回 true。</td>
<td>[ -z $a ] 返回 false。</td>
</tr>
<tr>
<td>-n</td>
<td>检测字符串长度是否为0，不为0返回 true。</td>
<td>[ -z $a ] 返回 true。</td>
</tr>
<tr>
<td>str</td>
<td>检测字符串是否为空，不为空返回 true。</td>
<td>[ $a ] 返回 true。</td>
</tr>
</tbody>
</table>
<p>字符串长度：</p>
<ul>
<li>-z:zero ---&gt;true</li>
<li>-n: not zero---&gt;true</li>
</ul>
<h2 id="1-5-文件测试运算符">1.5. 文件测试运算符</h2>
<p>文件测试运算符用于检测 Unix 文件的各种属性。</p>
<p>文件测试运算符列表</p>
<table>
<thead>
<tr>
<th>操作符</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td>-b file</td>
<td>检测文件是否是块设备文件，如果是，则返回 true。</td>
<td>[ -b $file ] 返回 false。</td>
</tr>
<tr>
<td>-c file</td>
<td>检测文件是否是字符设备文件，如果是，则返回 true。</td>
<td>[ -b $file ] 返回 false。</td>
</tr>
<tr>
<td>-d file</td>
<td>检测文件是否是目录，如果是，则返回 true。</td>
<td>[ -d $file ] 返回 false。</td>
</tr>
<tr>
<td>-f file</td>
<td>检测文件是否是普通文件（既不是目录，也不是设备文件），如果是，则返回 true。</td>
<td>[ -f $file ] 返回 true。</td>
</tr>
<tr>
<td>-g file</td>
<td>检测文件是否设置了 SGID 位，如果是，则返回 true。</td>
<td>[ -g $file ] 返回 false。</td>
</tr>
<tr>
<td>-k file</td>
<td>检测文件是否设置了粘着位(Sticky Bit)，如果是，则返回 true。</td>
<td>[ -k $file ] 返回 false。</td>
</tr>
<tr>
<td>-p file</td>
<td>检测文件是否是具名管道，如果是，则返回 true。</td>
<td>[ -p $file ] 返回 false。</td>
</tr>
<tr>
<td>-u file</td>
<td>检测文件是否设置了 SUID 位，如果是，则返回 true。</td>
<td>[ -u $file ] 返回 false。</td>
</tr>
<tr>
<td>-r file</td>
<td>检测文件是否可读，如果是，则返回 true。</td>
<td>[ -r $file ] 返回 true。</td>
</tr>
<tr>
<td>-w file</td>
<td>检测文件是否可写，如果是，则返回 true。</td>
<td>[ -w $file ] 返回 true。</td>
</tr>
<tr>
<td>-x file</td>
<td>检测文件是否可执行，如果是，则返回 true。</td>
<td>[ -x $file ] 返回 true。</td>
</tr>
<tr>
<td>-s file</td>
<td>检测文件是否为空（文件大小是否大于0），不为空返回 true。</td>
<td>[ -s $file ] 返回 true。</td>
</tr>
<tr>
<td>-e file</td>
<td>检测文件（包括目录）是否存在，如果是，则返回 true。</td>
<td>[ -e $file ] 返回 true。</td>
</tr>
</tbody>
</table>
<h1 id="2-shell注释">2. shell注释</h1>
<p>以“#”开头的行就是注释，会被解释器忽略。
sh里没有多行注释，只能每一行加一个#号。</p>
<p>如果在开发过程中，遇到大段的代码需要临时注释起来，过一会儿又取消注释，怎么办呢？每一行加个#符号太费力了，可以把这一段要注释的代码用一对花括号括起来，定义成一个函数，没有地方调用这个函数，这块代码就不会执行，达到了和注释一样的效果。</p>
<p>参考：</p>
<ul>
<li><a href="http://c.biancheng.net/cpp/shell/">http://c.biancheng.net/cpp/shell/</a></li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-c4413e1441110142d959e29a1be59096">4 - Shell数组</h1>
    
	<h1 id="1-字符串">1. 字符串</h1>
<p>字符串是shell编程中最常用最有用的数据类型（除了数字和字符串，也没啥其它类型好用了），字符串可以用单引号，也可以用双引号，也可以不用引号。单双引号的区别跟PHP类似。</p>
<h2 id="1-1-单引号">1.1. 单引号</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#000">str</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;this is a string&#39;</span>
</span></span></code></pre></div><p>单引号字符串的限制：</p>
<ul>
<li>单引号里的任何字符都会原样输出，单引号字符串中的变量是无效的；</li>
<li>单引号字串中不能出现单引号（对单引号使用转义符后也不行）。</li>
</ul>
<h2 id="1-2-双引号">1.2. 双引号</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#000">your_name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;qinjx&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#000">str</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;Hello, I know your are \&#34;</span><span style="color:#000">$your_name</span><span style="color:#4e9a06">\&#34;! \n&#34;</span>
</span></span></code></pre></div><p>双引号的优点：</p>
<ul>
<li>双引号里可以有变量</li>
<li>双引号里可以出现转义字符</li>
</ul>
<h2 id="1-3-拼接字符串">1.3. 拼接字符串</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#000">your_name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;qinjx&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#000">greeting</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;hello, &#34;</span><span style="color:#000">$your_name</span><span style="color:#4e9a06">&#34; !&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#000">greeting_1</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;hello, </span><span style="color:#4e9a06">${</span><span style="color:#000">your_name</span><span style="color:#4e9a06">}</span><span style="color:#4e9a06"> !&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">echo</span> <span style="color:#000">$greeting</span> <span style="color:#000">$greeting_1</span>
</span></span></code></pre></div><h2 id="1-4-获取字符串长度">1.4. 获取字符串长度</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#000">string</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;abcd&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">echo</span> <span style="color:#4e9a06">${#</span><span style="color:#000">string</span><span style="color:#4e9a06">}</span> <span style="color:#8f5902;font-style:italic">#输出 4</span>
</span></span></code></pre></div><h2 id="1-5-提取子字符串">1.5. 提取子字符串</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#000">string</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;alibaba is a great company&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">echo</span> <span style="color:#4e9a06">${</span><span style="color:#000">string</span><span style="color:#000;font-weight:bold">:</span><span style="color:#000">1</span><span style="color:#000;font-weight:bold">:</span><span style="color:#000">4</span><span style="color:#4e9a06">}</span> <span style="color:#8f5902;font-style:italic">#输出liba</span>
</span></span></code></pre></div><h2 id="1-6-查找子字符串">1.6. 查找子字符串</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#000">string</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;alibaba is a great company&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">echo</span> <span style="color:#4e9a06">`</span>expr index <span style="color:#4e9a06">&#34;</span><span style="color:#000">$string</span><span style="color:#4e9a06">&#34;</span> is<span style="color:#4e9a06">`</span>
</span></span></code></pre></div><h1 id="2-数组">2. 数组</h1>
<p>bash支持一维数组（不支持多维数组），并且没有限定数组的大小。类似与C语言，数组元素的下标由0开始编号。获取数组中的元素要利用下标，下标可以是整数或算术表达式，其值应大于或等于0。</p>
<h2 id="2-1-定义数组">2.1. 定义数组</h2>
<p>在Shell中，用括号来表示数组，数组元素用“空格”符号分割开。</p>
<p>定义数组的一般形式为：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#000">array_name</span><span style="color:#ce5c00;font-weight:bold">=(</span>value1 ... valuen<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span></code></pre></div><p>例如：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#000">array_name</span><span style="color:#ce5c00;font-weight:bold">=(</span>value0 value1 value2 value3<span style="color:#ce5c00;font-weight:bold">)</span>
</span></span></code></pre></div><p>或者</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#000">array_name</span><span style="color:#ce5c00;font-weight:bold">=(</span>
</span></span><span style="display:flex;"><span>value0
</span></span><span style="display:flex;"><span>value1
</span></span><span style="display:flex;"><span>value2
</span></span><span style="display:flex;"><span>value3
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">)</span>
</span></span></code></pre></div><p>还可以单独定义数组的各个分量：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>array_name<span style="color:#ce5c00;font-weight:bold">[</span>0<span style="color:#ce5c00;font-weight:bold">]=</span>value0
</span></span><span style="display:flex;"><span>array_name<span style="color:#ce5c00;font-weight:bold">[</span>1<span style="color:#ce5c00;font-weight:bold">]=</span>value1
</span></span><span style="display:flex;"><span>array_name<span style="color:#ce5c00;font-weight:bold">[</span>2<span style="color:#ce5c00;font-weight:bold">]=</span>value2
</span></span></code></pre></div><p>可以不使用连续的下标，而且下标的范围没有限制。</p>
<h2 id="2-2-读取数组">2.2. 读取数组</h2>
<p>读取数组元素值的一般格式是：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#4e9a06">${</span><span style="color:#000">array_name</span><span style="color:#000;font-weight:bold">[index]</span><span style="color:#4e9a06">}</span>
</span></span></code></pre></div><p>例如：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#000">valuen</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">${</span><span style="color:#000">array_name</span><span style="color:#000;font-weight:bold">[2]</span><span style="color:#4e9a06">}</span>
</span></span></code></pre></div><p>使用@ 或 * 可以获取数组中的所有元素，例如：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#4e9a06">${</span><span style="color:#000">array_name</span><span style="color:#000;font-weight:bold">[*]</span><span style="color:#4e9a06">}</span>
</span></span><span style="display:flex;"><span><span style="color:#4e9a06">${</span><span style="color:#000">array_name</span><span style="color:#000;font-weight:bold">[@]</span><span style="color:#4e9a06">}</span>
</span></span></code></pre></div><h2 id="2-3-获取数组的长度">2.3. 获取数组的长度</h2>
<p>获取数组长度的方法与获取字符串长度的方法相同，例如：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># 取得数组元素的个数</span>
</span></span><span style="display:flex;"><span><span style="color:#000">length</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">${#</span><span style="color:#000">array_name</span><span style="color:#000;font-weight:bold">[@]</span><span style="color:#4e9a06">}</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># 或者</span>
</span></span><span style="display:flex;"><span><span style="color:#000">length</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">${#</span><span style="color:#000">array_name</span><span style="color:#000;font-weight:bold">[*]</span><span style="color:#4e9a06">}</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># 取得数组单个元素的长度</span>
</span></span><span style="display:flex;"><span><span style="color:#000">lengthn</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">${#</span><span style="color:#000">array_name</span><span style="color:#000;font-weight:bold">[n]</span><span style="color:#4e9a06">}</span>
</span></span></code></pre></div><p>参考：</p>
<ul>
<li><a href="http://c.biancheng.net/cpp/shell/">http://c.biancheng.net/cpp/shell/</a></li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-1c4908b9298c264248fc1c192a1aa162">5 - Shell echo命令</h1>
    
	<h1 id="1-echo">1. echo</h1>
<p>echo是Shell的一个内部指令，用于在屏幕上打印出指定的字符串。命令格式：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#204a87">echo</span> arg
</span></span></code></pre></div><p>您可以使用echo实现更复杂的输出格式控制。</p>
<h2 id="1-1-显示转义字符">1.1. 显示转义字符</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#34;\&#34;It is a test\&#34;&#34;</span>
</span></span></code></pre></div><p>结果将是：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#4e9a06">&#34;It is a test&#34;</span>
</span></span></code></pre></div><p>双引号也可以省略。</p>
<h2 id="1-2-显示变量">1.2. 显示变量</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#000">name</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#34;OK&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#34;</span><span style="color:#000">$name</span><span style="color:#4e9a06"> It is a test&#34;</span>
</span></span></code></pre></div><p>结果将是：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>OK It is a <span style="color:#204a87">test</span>
</span></span></code></pre></div><p>同样双引号也可以省略。</p>
<p>如果变量与其它字符相连的话，需要使用大括号（{ }）：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#000">mouth</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">8</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#34;</span><span style="color:#4e9a06">${</span><span style="color:#000">mouth</span><span style="color:#4e9a06">}</span><span style="color:#4e9a06">-1-2009&#34;</span>
</span></span></code></pre></div><p>结果将是：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>8-1-2009
</span></span></code></pre></div><h2 id="1-3-显示换行">1.3. 显示换行</h2>
<pre tabindex="0"><code>echo &#34;OK!\n&#34;
echo &#34;It is a test&#34;
</code></pre><p>输出：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>OK!
</span></span><span style="display:flex;"><span>It is a <span style="color:#204a87">test</span>
</span></span></code></pre></div><h2 id="1-4-显示不换行">1.4. 显示不换行</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#34;OK!\c&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#34;It is a test&#34;</span>
</span></span></code></pre></div><p>输出：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>OK!It si a <span style="color:#204a87">test</span>
</span></span></code></pre></div><h2 id="1-5-显示结果重定向至文件">1.5. 显示结果重定向至文件</h2>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#34;It is a test&#34;</span> &gt; myfile
</span></span></code></pre></div><h2 id="1-6-原样输出字符串">1.6. 原样输出字符串</h2>
<p>若需要原样输出字符串（不进行转义），请使用单引号。例如：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#39;$name\&#34;&#39;</span>
</span></span></code></pre></div><h2 id="1-7-显示命令执行结果">1.7. 显示命令执行结果</h2>
<pre tabindex="0"><code>echo `date`
</code></pre><p>结果将显示当前日期
从上面可看出，双引号可有可无，单引号主要用在原样输出中。</p>
<h1 id="2-printf">2. printf</h1>
<p>printf 命令用于格式化输出， 是echo命令的增强版。它是C语言printf()库函数的一个有限的变形，并且在语法上有些不同。
printf 不像 echo 那样会自动换行，必须显式添加换行符(\n)。
注意：printf 由 POSIX 标准所定义，移植性要比 echo 好。</p>
<p>printf 命令的语法：</p>
<pre tabindex="0"><code>printf  format-string  [arguments...]
</code></pre><p>format-string 为格式控制字符串，arguments 为参数列表。</p>
<p>printf()功能和用法与 printf 命令类似</p>
<p>这里仅说明与C语言printf()函数的不同：</p>
<ul>
<li>printf 命令不用加括号</li>
<li>format-string 可以没有引号，但最好加上，单引号双引号均可。</li>
<li>参数多于格式控制符(%)时，format-string 可以重用，可以将所有参数都转换。</li>
<li>格式只指定了一个参数，但多出的参数仍然会按照该格式输出，format-string 被重用</li>
<li>arguments 使用空格分隔，不用逗号。</li>
</ul>
<p>如果没有 arguments，那么 %s 用NULL代替，%d 用 0 代替</p>
<p>如果以 %d 的格式来显示字符串，那么会有警告，提示无效的数字，此时默认置为 0</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># format-string为双引号,单引号与双引号效果一样,没有引号也可以输出</span>
</span></span><span style="display:flex;"><span>$ <span style="color:#204a87">printf</span> <span style="color:#4e9a06">&#34;%d %s\n&#34;</span> <span style="color:#0000cf;font-weight:bold">1</span> <span style="color:#4e9a06">&#34;abc&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#0000cf;font-weight:bold">1</span> abc
</span></span></code></pre></div><p>注意，根据POSIX标准，浮点格式%e、%E、%f、%g与%G是“不需要被支持”。这是因为awk支持浮点预算，且有它自己的printf语句。这样Shell程序中需要将浮点数值进行格式化的打印时，可使用小型的awk程序实现。然而，内建于bash、ksh93和zsh中的printf命令都支持浮点格式。</p>
<p>参考：</p>
<ul>
<li><a href="http://c.biancheng.net/cpp/shell/">http://c.biancheng.net/cpp/shell/</a></li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-3e7580ccae2cfd4463708b26683b2832">6 - Shell 判断语句</h1>
    
	<h1 id="1-if语句">1. if语句</h1>
<p>if 语句通过关系运算符判断表达式的真假来决定执行哪个分支。Shell 有三种 if ... else 语句：</p>
<ul>
<li>if ... fi 语句；</li>
<li>if ... else ... fi 语句；</li>
<li>if ... elif ... else ... fi 语句。</li>
</ul>
<h2 id="1-1-if-else">1.1. if ... else</h2>
<p>if ... else 语句的语法：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">[</span> expression <span style="color:#ce5c00;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">then</span>
</span></span><span style="display:flex;"><span>   Statement<span style="color:#ce5c00;font-weight:bold">(</span>s<span style="color:#ce5c00;font-weight:bold">)</span> to be executed <span style="color:#204a87;font-weight:bold">if</span> expression is <span style="color:#204a87">true</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">fi</span>
</span></span></code></pre></div><p>如果 expression 返回 true，then 后边的语句将会被执行；如果返回 false，不会执行任何语句。
<strong>最后必须以 fi 来结尾闭合 if</strong>，fi 就是 if 倒过来拼写。
注意：<strong>expression 和方括号([ ])之间必须有空格</strong>，否则会有语法错误。</p>
<h2 id="1-2-if-else-fi">1.2. if ... else ... fi</h2>
<p>if ... else ... fi 语句的语法：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">[</span> expression <span style="color:#ce5c00;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">then</span>
</span></span><span style="display:flex;"><span>   Statement<span style="color:#ce5c00;font-weight:bold">(</span>s<span style="color:#ce5c00;font-weight:bold">)</span> to be executed <span style="color:#204a87;font-weight:bold">if</span> expression is <span style="color:#204a87">true</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">else</span>
</span></span><span style="display:flex;"><span>   Statement<span style="color:#ce5c00;font-weight:bold">(</span>s<span style="color:#ce5c00;font-weight:bold">)</span> to be executed <span style="color:#204a87;font-weight:bold">if</span> expression is not <span style="color:#204a87">true</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">fi</span>
</span></span></code></pre></div><p>如果 expression 返回 true，那么 then 后边的语句将会被执行；否则，执行 else 后边的语句。</p>
<h2 id="1-3-if-elif-fi-多分枝选择">1.3. if ... elif ... fi 多分枝选择</h2>
<p>if ... elif ... fi 语句可以对多个条件进行判断，语法为：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">if</span> <span style="color:#ce5c00;font-weight:bold">[</span> expression <span style="color:#0000cf;font-weight:bold">1</span> <span style="color:#ce5c00;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">then</span>
</span></span><span style="display:flex;"><span>   Statement<span style="color:#ce5c00;font-weight:bold">(</span>s<span style="color:#ce5c00;font-weight:bold">)</span> to be executed <span style="color:#204a87;font-weight:bold">if</span> expression <span style="color:#0000cf;font-weight:bold">1</span> is <span style="color:#204a87">true</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">elif</span> <span style="color:#ce5c00;font-weight:bold">[</span> expression <span style="color:#0000cf;font-weight:bold">2</span> <span style="color:#ce5c00;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">then</span>
</span></span><span style="display:flex;"><span>   Statement<span style="color:#ce5c00;font-weight:bold">(</span>s<span style="color:#ce5c00;font-weight:bold">)</span> to be executed <span style="color:#204a87;font-weight:bold">if</span> expression <span style="color:#0000cf;font-weight:bold">2</span> is <span style="color:#204a87">true</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">elif</span> <span style="color:#ce5c00;font-weight:bold">[</span> expression <span style="color:#0000cf;font-weight:bold">3</span> <span style="color:#ce5c00;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">then</span>
</span></span><span style="display:flex;"><span>   Statement<span style="color:#ce5c00;font-weight:bold">(</span>s<span style="color:#ce5c00;font-weight:bold">)</span> to be executed <span style="color:#204a87;font-weight:bold">if</span> expression <span style="color:#0000cf;font-weight:bold">3</span> is <span style="color:#204a87">true</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">else</span>
</span></span><span style="display:flex;"><span>   Statement<span style="color:#ce5c00;font-weight:bold">(</span>s<span style="color:#ce5c00;font-weight:bold">)</span> to be executed <span style="color:#204a87;font-weight:bold">if</span> no expression is <span style="color:#204a87">true</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">fi</span>
</span></span></code></pre></div><p>哪一个 expression 的值为 true，就执行哪个 expression 后面的语句；如果都为 false，那么不执行任何语句。</p>
<p>if ... else 语句也可以写成一行，用分号隔开，以命令的方式来运行</p>
<p>if ... else 语句也经常与 test 命令结合使用，test 命令用于检查某个条件是否成立，与方括号([ ])类似。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span> <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#204a87">test</span> $<span style="color:#ce5c00;font-weight:bold">[</span>num1<span style="color:#ce5c00;font-weight:bold">]</span> -eq $<span style="color:#ce5c00;font-weight:bold">[</span>num2<span style="color:#ce5c00;font-weight:bold">]</span>
</span></span></code></pre></div><h1 id="2-case语句">2. case语句</h1>
<p>case ... esac 与其他语言中的 switch ... case 语句类似，是一种多分枝选择结构。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">case</span> 值 in模式1<span style="color:#ce5c00;font-weight:bold">)</span>  <span style="color:#8f5902;font-style:italic">#-------&gt;匹配值</span>
</span></span><span style="display:flex;"><span>    command1
</span></span><span style="display:flex;"><span>    command2
</span></span><span style="display:flex;"><span>    command3
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">;;</span>  <span style="color:#8f5902;font-style:italic">#------&gt;break</span>
</span></span><span style="display:flex;"><span>模式2）
</span></span><span style="display:flex;"><span>    command1
</span></span><span style="display:flex;"><span>    command2
</span></span><span style="display:flex;"><span>    command3
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">;;</span>
</span></span><span style="display:flex;"><span>*<span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#8f5902;font-style:italic"># -------&gt;相当于default</span>
</span></span><span style="display:flex;"><span>    command1
</span></span><span style="display:flex;"><span>    command2
</span></span><span style="display:flex;"><span>    command3
</span></span><span style="display:flex;"><span>    <span style="color:#000;font-weight:bold">;;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">esac</span>  <span style="color:#8f5902;font-style:italic">#-----&gt;结束标志</span>
</span></span></code></pre></div><p>case工作方式如上所示。</p>
<ul>
<li>取值后面必须为关键字 in，</li>
<li>每一模式必须以右括号结束</li>
<li>取值可以为变量或常数。</li>
<li>匹配发现取值符合某一模式后，其间所有命令开始执行直至 ;;。</li>
<li>;; 与其他语言中的 break 类似，意思是跳到整个 case 语句的最后。</li>
<li>取值将检测匹配的每一个模式。一旦模式匹配，则执行完匹配模式相应命令后不再继续其他模式。</li>
<li>如果无一匹配模式，使用星号 * 捕获该值，再执行后面的命令。</li>
</ul>
<p>参考：</p>
<ul>
<li><a href="http://c.biancheng.net/cpp/shell/">http://c.biancheng.net/cpp/shell/</a></li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-520bfcc1b1f2e050d803497bcd9f2646">7 - Shell 循环语句</h1>
    
	<h1 id="1-for">1. for</h1>
<p>for循环一般格式为：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">for</span> 变量 in 列表
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">do</span>
</span></span><span style="display:flex;"><span>    command1
</span></span><span style="display:flex;"><span>    command2
</span></span><span style="display:flex;"><span>    ...
</span></span><span style="display:flex;"><span>    commandN
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">done</span>
</span></span></code></pre></div><p>列表是一组值（数字、字符串等）组成的序列，每个值通过空格分隔。每循环一次，就将列表中的下一个值赋给变量。
in 列表是可选的，如果不用它，for 循环使用命令行的位置参数。</p>
<p>示例：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">for</span> loop in <span style="color:#0000cf;font-weight:bold">1</span> <span style="color:#0000cf;font-weight:bold">2</span> <span style="color:#0000cf;font-weight:bold">3</span> <span style="color:#0000cf;font-weight:bold">4</span> <span style="color:#0000cf;font-weight:bold">5</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#34;The value is: </span><span style="color:#000">$loop</span><span style="color:#4e9a06">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">done</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># 运行结果：</span>
</span></span><span style="display:flex;"><span>The value is: <span style="color:#0000cf;font-weight:bold">1</span>
</span></span><span style="display:flex;"><span>The value is: <span style="color:#0000cf;font-weight:bold">2</span>
</span></span><span style="display:flex;"><span>The value is: <span style="color:#0000cf;font-weight:bold">3</span>
</span></span><span style="display:flex;"><span>The value is: <span style="color:#0000cf;font-weight:bold">4</span>
</span></span><span style="display:flex;"><span>The value is: <span style="color:#0000cf;font-weight:bold">5</span>
</span></span></code></pre></div><h1 id="2-while">2. while</h1>
<p>while循环用于不断执行一系列命令，也用于从输入文件中读取数据</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">while</span> <span style="color:#204a87">command</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">do</span>
</span></span><span style="display:flex;"><span>   Statement<span style="color:#ce5c00;font-weight:bold">(</span>s<span style="color:#ce5c00;font-weight:bold">)</span> to be executed <span style="color:#204a87;font-weight:bold">if</span> <span style="color:#204a87">command</span> is <span style="color:#204a87">true</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">done</span>
</span></span></code></pre></div><p>命令执行完毕，控制返回循环顶部，从头开始直至测试条件为假。</p>
<p>示例：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#000">COUNTER</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">0</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">while</span> <span style="color:#ce5c00;font-weight:bold">[</span> <span style="color:#000">$COUNTER</span> -lt <span style="color:#0000cf;font-weight:bold">5</span> <span style="color:#ce5c00;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#000">COUNTER</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">&#39;expr $COUNTER+1&#39;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87">echo</span> <span style="color:#000">$COUNTER</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">done</span>
</span></span></code></pre></div><p>while循环可用于读取键盘信息。下面的例子中，输入信息被设置为变量FILM，按&lt;Ctrl-D&gt;结束循环。</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#39;type &lt;CTRL-D&gt; to terminate&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87">echo</span> -n <span style="color:#4e9a06">&#39;enter your most liked film: &#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">while</span> <span style="color:#204a87">read</span> FILM
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#34;Yeah! great film the </span><span style="color:#000">$FILM</span><span style="color:#4e9a06">&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">done</span>
</span></span></code></pre></div><h1 id="3-until">3. until</h1>
<p>until 循环执行一系列命令直至条件为 true 时停止。until 循环与 while 循环在处理方式上刚好相反。一般while循环优于until循环，但在某些时候，也只是极少数情况下，until 循环更加有用。
until 循环格式为：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">until</span> <span style="color:#204a87">command</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">do</span>
</span></span><span style="display:flex;"><span>   Statement<span style="color:#ce5c00;font-weight:bold">(</span>s<span style="color:#ce5c00;font-weight:bold">)</span> to be executed <span style="color:#204a87;font-weight:bold">until</span> <span style="color:#204a87">command</span> is <span style="color:#204a87">true</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">done</span>
</span></span></code></pre></div><p>command 一般为条件表达式，如果返回值为 false，则继续执行循环体内的语句，否则跳出循环。</p>
<p>示例：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#000">a</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#0000cf;font-weight:bold">0</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">until</span> <span style="color:#ce5c00;font-weight:bold">[</span> ! <span style="color:#000">$a</span> -lt <span style="color:#0000cf;font-weight:bold">10</span> <span style="color:#ce5c00;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">do</span>
</span></span><span style="display:flex;"><span>   <span style="color:#204a87">echo</span> <span style="color:#000">$a</span>
</span></span><span style="display:flex;"><span>   <span style="color:#000">a</span><span style="color:#ce5c00;font-weight:bold">=</span><span style="color:#4e9a06">`</span>expr <span style="color:#000">$a</span> + 1<span style="color:#4e9a06">`</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">done</span>
</span></span></code></pre></div><h1 id="4-break命令">4. break命令</h1>
<p>break命令允许跳出<strong>所有</strong>（终止执行后面的所有循环）。</p>
<p>在嵌套循环中，break 命令后面还可以跟一个整数，表示跳出第几层循环</p>
<pre tabindex="0"><code>break n
</code></pre><p>表示跳出第 n 层循环。</p>
<p>示例：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#204a87;font-weight:bold">while</span> :
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87">echo</span> -n <span style="color:#4e9a06">&#34;Input a number between 1 to 5: &#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87">read</span> aNum
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">case</span> <span style="color:#000">$aNum</span> in
</span></span><span style="display:flex;"><span>        1<span style="color:#000;font-weight:bold">|</span>2<span style="color:#000;font-weight:bold">|</span>3<span style="color:#000;font-weight:bold">|</span>4<span style="color:#000;font-weight:bold">|</span>5<span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#34;Your number is </span><span style="color:#000">$aNum</span><span style="color:#4e9a06">!&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">;;</span>
</span></span><span style="display:flex;"><span>        *<span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#34;You do not select a number between 1 to 5, game is over!&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87">break</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">;;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">esac</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">done</span>
</span></span></code></pre></div><h1 id="5-continue命令">5. continue命令</h1>
<p>continue命令与break命令类似，只有一点差别，它不会跳出所有循环，仅仅跳出循环</p>
<p>同样，continue 后面也可以跟一个数字，表示跳出第几层循环。</p>
<p>示例：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#204a87;font-weight:bold">while</span> :
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">do</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87">echo</span> -n <span style="color:#4e9a06">&#34;Input a number between 1 to 5: &#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87">read</span> aNum
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">case</span> <span style="color:#000">$aNum</span> in
</span></span><span style="display:flex;"><span>        1<span style="color:#000;font-weight:bold">|</span>2<span style="color:#000;font-weight:bold">|</span>3<span style="color:#000;font-weight:bold">|</span>4<span style="color:#000;font-weight:bold">|</span>5<span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#34;Your number is </span><span style="color:#000">$aNum</span><span style="color:#4e9a06">!&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">;;</span>
</span></span><span style="display:flex;"><span>        *<span style="color:#ce5c00;font-weight:bold">)</span> <span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#34;You do not select a number between 1 to 5!&#34;</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87;font-weight:bold">continue</span>
</span></span><span style="display:flex;"><span>            <span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#34;Game is over!&#34;</span>
</span></span><span style="display:flex;"><span>        <span style="color:#000;font-weight:bold">;;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87;font-weight:bold">esac</span>
</span></span><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">done</span>
</span></span></code></pre></div><p>参考：</p>
<ul>
<li><a href="http://c.biancheng.net/cpp/shell/">http://c.biancheng.net/cpp/shell/</a></li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-427cb5778e5423db520256d99897d9a6">8 - Shell 函数</h1>
    
	<h1 id="1-函数定义">1. 函数定义</h1>
<p>函数可以让我们将一个复杂功能划分成若干模块，让程序结构更加清晰，代码重复利用率更高。Shell 也支持函数。Shell 函数必须先定义后使用。</p>
<p>Shell 函数的定义格式如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>function_name <span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    list of commands
</span></span><span style="display:flex;"><span>    <span style="color:#ce5c00;font-weight:bold">[</span> <span style="color:#204a87;font-weight:bold">return</span> value <span style="color:#ce5c00;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><p>也可以在函数名前加上关键字 function：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#204a87;font-weight:bold">function</span> function_name <span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>    list of commands
</span></span><span style="display:flex;"><span>    <span style="color:#ce5c00;font-weight:bold">[</span> <span style="color:#204a87;font-weight:bold">return</span> value <span style="color:#ce5c00;font-weight:bold">]</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span></code></pre></div><h1 id="2-函数返回值">2. 函数返回值</h1>
<p>函数返回值，可以显式增加return语句；如果不加，会将最后一条命令运行结果作为返回值。</p>
<p>Shell 函数返回值只能是整数，一般用来表示函数执行成功与否，0表示成功，其他值表示失败。</p>
<p>如果 return 其他数据，比如一个字符串，往往会得到错误提示：“numeric argument required”。</p>
<p>如果一定要让函数返回字符串，那么可以先定义一个变量，用来接收函数的计算结果，脚本在需要的时候访问这个变量来获得函数返回值。函数返回值在调用该函数后通过 $?【$?表示上个命令的退出状态，或函数的返回值。】 来获得。</p>
<h1 id="3-函数调用">3. 函数调用</h1>
<p>调用函数只需要给出函数名，不需要加括号。</p>
<p>像删除变量一样，删除函数也可以使用 unset 不过要加上 .f 选项</p>
<pre tabindex="0"><code>$unset .f function_name
</code></pre><p>如果你希望直接从终端调用函数，可以将函数定义在主目录下的 .profile 文件，这样每次登录后，在命令提示符后面输入函数名字就可以立即调用。</p>
<p>示例：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span><span style="color:#8f5902;font-style:italic"># Define your function here</span>
</span></span><span style="display:flex;"><span>Hello <span style="color:#ce5c00;font-weight:bold">()</span> <span style="color:#ce5c00;font-weight:bold">{</span>
</span></span><span style="display:flex;"><span>   <span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#34;Url is http://see.xidian.edu.cn/cpp/shell/&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"># Invoke your function</span>
</span></span><span style="display:flex;"><span>Hello
</span></span></code></pre></div><p>运行结果：</p>
<pre tabindex="0"><code>$./test.sh
Hello World
$
</code></pre><h1 id="4-函数参数">4. 函数参数</h1>
<p>在Shell中，调用函数时可以向其传递参数。在函数体内部，通过 $n 的形式来获取参数的值，例如，$1表示第一个参数，$2表示第二个参数...</p>
<p>注意，$10 不能获取第十个参数，获取第十个参数需要${10}。当n&gt;=10时，需要使用${n}来获取参数。</p>
<p>特殊变量用来处理参数:</p>
<table>
<thead>
<tr>
<th>特殊变量</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>$#</td>
<td>传递给函数的参数个数。</td>
</tr>
<tr>
<td>$*</td>
<td>显示所有传递给函数的参数。</td>
</tr>
<tr>
<td>$@</td>
<td>与$*相同，但是略有区别，请查看<a href="http://c.biancheng.net/cpp/view/2739.html">Shell特殊变量</a>。</td>
</tr>
<tr>
<td>$?</td>
<td>函数的返回值。</td>
</tr>
</tbody>
</table>
<p>带参数的函数示例：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic">#!/bin/bash
</span></span></span><span style="display:flex;"><span><span style="color:#8f5902;font-style:italic"></span>funWithParam<span style="color:#ce5c00;font-weight:bold">(){</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#34;The value of the first parameter is </span><span style="color:#000">$1</span><span style="color:#4e9a06"> !&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#34;The value of the second parameter is </span><span style="color:#000">$2</span><span style="color:#4e9a06"> !&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#34;The value of the tenth parameter is </span><span style="color:#000">$10</span><span style="color:#4e9a06"> !&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#34;The value of the tenth parameter is </span><span style="color:#4e9a06">${</span><span style="color:#000">10</span><span style="color:#4e9a06">}</span><span style="color:#4e9a06"> !&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#34;The value of the eleventh parameter is </span><span style="color:#4e9a06">${</span><span style="color:#000">11</span><span style="color:#4e9a06">}</span><span style="color:#4e9a06"> !&#34;</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#34;The amount of the parameters is </span><span style="color:#000">$#</span><span style="color:#4e9a06"> !&#34;</span>  <span style="color:#8f5902;font-style:italic"># 参数个数</span>
</span></span><span style="display:flex;"><span>    <span style="color:#204a87">echo</span> <span style="color:#4e9a06">&#34;The string of the parameters is </span><span style="color:#000">$*</span><span style="color:#4e9a06"> !&#34;</span>  <span style="color:#8f5902;font-style:italic"># 传递给函数的所有参数</span>
</span></span><span style="display:flex;"><span><span style="color:#ce5c00;font-weight:bold">}</span>
</span></span><span style="display:flex;"><span>funWithParam <span style="color:#0000cf;font-weight:bold">1</span> <span style="color:#0000cf;font-weight:bold">2</span> <span style="color:#0000cf;font-weight:bold">3</span> <span style="color:#0000cf;font-weight:bold">4</span> <span style="color:#0000cf;font-weight:bold">5</span> <span style="color:#0000cf;font-weight:bold">6</span> <span style="color:#0000cf;font-weight:bold">7</span> <span style="color:#0000cf;font-weight:bold">8</span> <span style="color:#0000cf;font-weight:bold">9</span> <span style="color:#0000cf;font-weight:bold">34</span> <span style="color:#0000cf;font-weight:bold">73</span>
</span></span></code></pre></div><p>运行脚本：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>The value of the first parameter is <span style="color:#0000cf;font-weight:bold">1</span> !
</span></span><span style="display:flex;"><span>The value of the second parameter is <span style="color:#0000cf;font-weight:bold">2</span> !
</span></span><span style="display:flex;"><span>The value of the tenth parameter is <span style="color:#0000cf;font-weight:bold">10</span> !
</span></span><span style="display:flex;"><span>The value of the tenth parameter is <span style="color:#0000cf;font-weight:bold">34</span> !
</span></span><span style="display:flex;"><span>The value of the eleventh parameter is <span style="color:#0000cf;font-weight:bold">73</span> !
</span></span><span style="display:flex;"><span>The amount of the parameters is <span style="color:#0000cf;font-weight:bold">12</span> !
</span></span><span style="display:flex;"><span>The string of the parameters is <span style="color:#0000cf;font-weight:bold">1</span> <span style="color:#0000cf;font-weight:bold">2</span> <span style="color:#0000cf;font-weight:bold">3</span> <span style="color:#0000cf;font-weight:bold">4</span> <span style="color:#0000cf;font-weight:bold">5</span> <span style="color:#0000cf;font-weight:bold">6</span> <span style="color:#0000cf;font-weight:bold">7</span> <span style="color:#0000cf;font-weight:bold">8</span> <span style="color:#0000cf;font-weight:bold">9</span> <span style="color:#0000cf;font-weight:bold">34</span> <span style="color:#0000cf;font-weight:bold">73</span> !<span style="color:#4e9a06">&#34;
</span></span></span></code></pre></div><p>参考：</p>
<ul>
<li><a href="http://c.biancheng.net/cpp/shell/">http://c.biancheng.net/cpp/shell/</a></li>
</ul>

</div>



    
	
  
    
    
	
    

<div class="td-content" style="page-break-before: always">
    
	<h1 id="pg-e6194060e55926f98d5865870e2d2baa">9 - Shell 重定向</h1>
    
	<p>Unix 命令默认从标准输入设备(stdin)获取输入，将结果输出到标准输出设备(stdout)显示。一般情况下，标准输入设备就是键盘，标准输出设备就是终端，即显示器。</p>
<h1 id="1-输出重定向">1. 输出重定向</h1>
<p>命令的输出不仅可以是显示器，还可以很容易的转移向到文件，这被称为输出重定向。</p>
<p>命令输出重定向的语法为：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ <span style="color:#204a87">command</span> &gt; file
</span></span></code></pre></div><p>这样，输出到显示器的内容就可以被重定向到文件。</p>
<p>输出重定向会覆盖文件内容；如果不希望文件内容被覆盖，可以使用 &gt;&gt; 追加到文件末尾</p>
<h1 id="2-输入重定向">2. 输入重定向</h1>
<p>和输出重定向一样，Unix 命令也可以从文件获取输入，语法为：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ <span style="color:#204a87">command</span> &lt; file
</span></span></code></pre></div><p>这样，本来需要从键盘获取输入的命令会转移到文件读取内容。</p>
<p>注意：输出重定向是大于号(&gt;)，输入重定向是小于号(&lt;)。</p>
<h1 id="3-重定向深入讲解">3. 重定向深入讲解</h1>
<p>一般情况下，每个 Unix/Linux 命令运行时都会打开三个文件：</p>
<ul>
<li>标准输入文件(stdin)：stdin的文件描述符为0，Unix程序默认从stdin读取数据。</li>
<li>标准输出文件(stdout)：stdout 的文件描述符为1，Unix程序默认向stdout输出数据。</li>
<li>标准错误文件(stderr)：stderr的文件描述符为2，Unix程序会向stderr流中写入错误信息。</li>
</ul>
<p>默认情况下，command &gt; file 将 stdout 重定向到 file，command &lt; file 将stdin 重定向到 file。</p>
<p>如果希望 stderr 重定向到 file，可以这样写：</p>
<pre tabindex="0"><code>$command 2 &gt; file
</code></pre><p>如果希望 stderr 追加到 file 文件末尾，可以这样写：</p>
<pre tabindex="0"><code>$command 2 &gt;&gt; file
</code></pre><p>2 表示标准错误文件(stderr)。</p>
<p>如果希望将 stdout 和 stderr 合并后重定向到 file，可以这样写：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#000">$command</span> &gt; file 2&gt;<span style="color:#000;font-weight:bold">&amp;</span><span style="color:#0000cf;font-weight:bold">1</span>
</span></span></code></pre></div><p>或</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#000">$command</span> &gt;&gt; file 2&gt;<span style="color:#000;font-weight:bold">&amp;</span><span style="color:#0000cf;font-weight:bold">1</span>
</span></span></code></pre></div><p>如果希望对 stdin 和 stdout 都重定向，可以这样写：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#000">$command</span> &lt; file1 &gt;file2
</span></span></code></pre></div><p>command 命令将 stdin 重定向到 file1，将 stdout 重定向到 file2。</p>
<p>全部可用的重定向命令列表</p>
<table>
<thead>
<tr>
<th>命令</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>command &gt; file</td>
<td>将输出重定向到 file。</td>
</tr>
<tr>
<td>command &lt; file</td>
<td>将输入重定向到 file。</td>
</tr>
<tr>
<td>command &gt;&gt; file</td>
<td>将输出以追加的方式重定向到 file。</td>
</tr>
<tr>
<td>n &gt; file</td>
<td>将文件描述符为 n 的文件重定向到 file。</td>
</tr>
<tr>
<td>n &gt;&gt; file</td>
<td>将文件描述符为 n 的文件以追加的方式重定向到 file。</td>
</tr>
<tr>
<td>n &gt;&amp; m</td>
<td>将输出文件 m 和 n 合并。</td>
</tr>
<tr>
<td>n &lt;&amp; m</td>
<td>将输入文件 m 和 n 合并。</td>
</tr>
<tr>
<td>&lt;&lt; tag</td>
<td>将开始标记 tag 和结束标记 tag 之间的内容作为输入。</td>
</tr>
</tbody>
</table>
<h1 id="4-here-document">4. Here Document</h1>
<p>Here Document 目前没有统一的翻译，这里暂译为”嵌入文档“。Here Document 是 Shell 中的一种特殊的重定向方式，它的基本的形式如下：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#204a87">command</span> <span style="color:#4e9a06">&lt;&lt; delimiter
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">    document
</span></span></span><span style="display:flex;"><span><span style="color:#4e9a06">delimiter</span>
</span></span></code></pre></div><p>它的作用是将两个 delimiter 之间的内容(document) 作为输入传递给 command。
注意：</p>
<ul>
<li>结尾的delimiter 一定要顶格写，前面不能有任何字符，后面也不能有任何字符，包括空格和 tab 缩进。</li>
<li>开始的delimiter前后的空格会被忽略掉。</li>
</ul>
<h1 id="5-dev-null-文件">5. /dev/null 文件</h1>
<p>如果希望执行某个命令，但又不希望在屏幕上显示输出结果，那么可以将输出重定向到 /dev/null：</p>
<pre tabindex="0"><code>$ command &gt; /dev/null
</code></pre><p>/dev/null 是一个特殊的文件，写入到它的内容都会被丢弃；如果尝试从该文件读取内容，那么什么也读不到。但是 /dev/null 文件非常有用，将命令的输出重定向到它，会起到”禁止输出“的效果。</p>
<p>如果希望屏蔽 stdout 和 stderr，可以这样写：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ <span style="color:#204a87">command</span> &gt; /dev/null 2&gt;<span style="color:#000;font-weight:bold">&amp;</span><span style="color:#0000cf;font-weight:bold">1</span>
</span></span></code></pre></div><h1 id="6-文件包含">6. 文件包含</h1>
<p>像其他语言一样，Shell 也可以包含外部脚本，将外部脚本的内容合并到当前脚本。</p>
<p>Shell 中包含脚本可以使用：</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>. filename
</span></span></code></pre></div><p>或</p>
<div class="highlight"><pre tabindex="0" style="background-color:#f8f8f8;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span><span style="color:#204a87">source</span> filename
</span></span></code></pre></div><p>两种方式的效果相同，简单起见，一般使用点号(.)，但是注意点号(.)和文件名中间有一空格。</p>
<p>注意：被包含脚本不需要有执行权限。</p>
<p>参考：</p>
<ul>
<li><a href="http://c.biancheng.net/cpp/shell/">http://c.biancheng.net/cpp/shell/</a></li>
</ul>

</div>



    
	
  



          </main>
        </div>
      </div>
      
<footer class="bg-dark py-5 row d-print-none">
  <div class="container-fluid mx-sm-5">
    <div class="row">
      <div class="col-6 col-sm-4 text-xs-center order-sm-2">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="User mailing list" aria-label="User mailing list">
    <a class="text-white" target="_blank" rel="noopener" href="https://example.org/mail" aria-label="User mailing list">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Twitter" aria-label="Twitter">
    <a class="text-white" target="_blank" rel="noopener" href="https://example.org/twitter" aria-label="Twitter">
      <i class="fab fa-twitter"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Stack Overflow" aria-label="Stack Overflow">
    <a class="text-white" target="_blank" rel="noopener" href="https://example.org/stack" aria-label="Stack Overflow">
      <i class="fab fa-stack-overflow"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-6 col-sm-4 text-right text-xs-center order-sm-3">
        
        
        
<ul class="list-inline mb-0">
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="GitHub" aria-label="GitHub">
    <a class="text-white" target="_blank" rel="noopener" href="https://github.com/huweihuang/blog.huweihuang.com" aria-label="GitHub">
      <i class="fab fa-github"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Slack" aria-label="Slack">
    <a class="text-white" target="_blank" rel="noopener" href="https://example.org/slack" aria-label="Slack">
      <i class="fab fa-slack"></i>
    </a>
  </li>
  
  <li class="list-inline-item mx-2 h3" data-toggle="tooltip" data-placement="top" title="Developer mailing list" aria-label="Developer mailing list">
    <a class="text-white" target="_blank" rel="noopener" href="https://example.org/mail" aria-label="Developer mailing list">
      <i class="fa fa-envelope"></i>
    </a>
  </li>
  
</ul>

        
        
      </div>
      <div class="col-12 col-sm-4 text-center py-2 order-sm-2">
        <small class="text-white">&copy; 2023 www.huweihuang.com 保留所有权利</small>
        <small class="ml-1"><a href="https://policies.google.com/privacy" target="_blank" rel="noopener">隐私政策</a></small>
	
		<p class="mt-2"><a href="/about/">About</a></p>
	
      </div>
    </div>
  </div>
</footer>


    </div>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
    integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
    crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.min.js"
    integrity="sha512-UR25UO94eTnCVwjbXozyeVd6ZqpaAE9naiEUBK/A+QDbfSTQFhPGj5lOR6d8tsgbBk84Ggb5A3EkjsOgPRPcKA=="
    crossorigin="anonymous"></script>





<script src='/js/tabpane-persist.js'></script>




















<script src="/js/main.min.91798a335c881f1b6b805085ba4aa22d1dbd2b0b18d105d05189fa104ddae350.js" integrity="sha256-kXmKM1yIHxtrgFCFukqiLR29KwsY0QXQUYn6EE3a41A=" crossorigin="anonymous"></script>



<script src='/js/prism.js'></script>



  </body>
</html>
